---
title: "Scraping des POI : OpenStreetMap et Google Maps"
subtitle: TÃ¢che sous-Ã©valuÃ©e mais pourtant stratÃ©gique dans les SIG
author: "Hugo Roussaffa"
lang: fr
translations: !expr (read_yaml(Â¨translation.yamlÂ¨)) 
date: today
format:
  html: 
    toc: true
    toc-title: "Sommaire"
    number-sections: true
    code-fold: true
jupyter: python3
---


## ðŸ“Œ Introduction
Explorons comment extraire des **points dâ€™intÃ©rÃªt (POI)** depuis **OpenStreetMap** et **Google Maps**, puis les nettoyer et les stocker dans une base **PostGIS** en vue d'Ãªtre analysÃ©.

:::{.column-page}
```{python}
#| echo: false
#| warning: false
#| label: fig-map-osm-hospitals

import folium
import geopandas as gpd
from shapely.geometry import Point
import json

# Open and read the JSON file
with open('../data/hospitals_paris.json', 'r') as file:
    data = json.load(file)

# Convertir les donnÃ©es JSON en DataFrame Pandas
hospitals = [
    (el["lat"], el["lon"], el["tags"].get("name", "Inconnu"))
    for el in data["elements"]
]

df = gpd.GeoDataFrame(hospitals, columns=["lat", "lon", "name"])
df["geometry"] = df.apply(lambda row: Point(row["lon"], row["lat"]), axis=1)

# CrÃ©ation de la carte centrÃ©e sur Paris
m = folium.Map(location=[48.8566, 2.3522], zoom_start=12)

# Ajout des points d'intÃ©rÃªt
for _, row in df.iterrows():
    folium.Marker(
        location=[row["lat"], row["lon"]],
        popup=row["name"],
        icon=folium.Icon(color="blue", icon="info-sign")
    ).add_to(m)

# Afficher la carte
m
```

:::